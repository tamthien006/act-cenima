<div class="card">
  <div class="actions" style="justify-content:space-between">
    <h3>Danh sách suất chiếu</h3>
    <button class="btn brand" id="btnAddShowtime">+ Tạo suất chiếu</button>
  </div>
  <table class="table" id="showtimeTbl">
    <thead><tr><th>Phim</th><th>Rạp/Phòng</th><th>Thời gian</th></tr></thead>
    <tbody></tbody>
  </table>
</div>

<script type="module">
  import { apiGet, apiPost } from "../shared/api.js";

  async function load() {
    const d = await apiGet("/showtimes");
    const tb = document.querySelector("#showtimeTbl tbody");
    tb.innerHTML = d.map(s => `
      <tr>
        <td>${s.movieId}</td>
        <td>${s.theater || ""} / ${s.room || ""}</td>
        <td>${new Date(s.startsAt).toLocaleString()}</td>
      </tr>`).join("");
  }

  document.getElementById("btnAddShowtime").addEventListener("click", async () => {
    const movieId = prompt("movieId:");
    if (!movieId) return;
    const theater = prompt("Tên rạp:");
    const room = prompt("Phòng:");
    const startsAt = prompt("Thời gian (YYYY-MM-DDTHH:mm):");
    await apiPost("/showtimes", { movieId, theater, room, startsAt });
    load();
  });

  load();
</script>